
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Penguins’ Plot Paradigm &#8212; penguins  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon-32x32.png"/>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Reference" href="../../reference/" />
    <link rel="prev" title="Explanations" href="../" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="penguins-plot-paradigm">
<h1>Penguins’ Plot Paradigm<a class="headerlink" href="#penguins-plot-paradigm" title="Permalink to this headline">¶</a></h1>
<p>It should come as no surprise that penguins is essentially a wrapper around matplotlib.
The aim of this page is to (try to) explain a little bit of how penguins works behind the scenes, utilising matplotlib in each plotting stage.</p>
<p>One of the general principles that I have tried to adhere to is to minimise, or even completely obviate, the need for the user to explicitly import matplotlib.
Consequently, none of the examples in the documentation require a matplotlib import.</p>
<p>However, at the same time, I have also tried to retain as much compatibility with matplotlib as possible.
That means that should you want to customise the plot using the raw power of matplotlib, you should be able to do it, as far as possible.
Indeed, in many of the more advanced examples, we will call methods on <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v3.5.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a> to customise the plots further.
(Note that using <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v3.5.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a> methods doesn’t require you, the user, to import matplotlib, so that’s fair game!)</p>
<section id="staging-and-the-pha">
<h2>Staging and the PHA<a class="headerlink" href="#staging-and-the-pha" title="Permalink to this headline">¶</a></h2>
<p>Calling the <a class="reference internal" href="../../reference/dataset/#penguins.dataset._1D_PlotMixin.stage" title="penguins.dataset._1D_PlotMixin.stage"><code class="xref py py-meth docutils literal notranslate"><span class="pre">1D</span></code></a> and <a class="reference internal" href="../../reference/dataset/#penguins.dataset._2D_PlotMixin.stage" title="penguins.dataset._2D_PlotMixin.stage"><code class="xref py py-meth docutils literal notranslate"><span class="pre">2D</span></code></a> methods on Dataset objects has the main job of constructing <a class="reference internal" href="../../reference/plotting/#penguins.pgplot.PlotObject1D" title="penguins.pgplot.PlotObject1D"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotObject1D</span></code></a> or <a class="reference internal" href="../../reference/plotting/#penguins.pgplot.PlotObject2D" title="penguins.pgplot.PlotObject2D"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotObject2D</span></code></a> objects respectively.
These objects essentially encapsulate <em>all</em> the information that <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.plot.html#matplotlib.axes.Axes.plot" title="(in Matplotlib v3.5.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Axes.plot</span></code></a> (1D) and <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.contour.html#matplotlib.axes.Axes.contour" title="(in Matplotlib v3.5.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Axes.contour</span></code></a> (2D) need to plot the graphs.
For example, for 2D spectra, all the contour levels are calculated from the parameters given inside the initialisation code of <a class="reference internal" href="../../reference/plotting/#penguins.pgplot.PlotObject2D" title="penguins.pgplot.PlotObject2D"><code class="xref any py py-class docutils literal notranslate"><span class="pre">PlotObject2D</span></code></a>.</p>
<p>Once constructed, the PlotObjects are added to what is known as the <strong>plot holding area</strong>, or PHA.
The PHA is an instance of <a class="reference internal" href="../../reference/plotting/#penguins.pgplot.PlotHoldingArea" title="penguins.pgplot.PlotHoldingArea"><code class="xref any py py-class docutils literal notranslate"><span class="pre">PlotHoldingArea</span></code></a>; each <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v3.5.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a> has its own PHA, which can be accessed with <code class="docutils literal notranslate"><span class="pre">ax.pha</span></code> (although there is no real reason why one would ever need to access it).
At this point, we have not yet actually called any matplotlib functions; we have merely populated the PHA with a set of PlotObjects.</p>
<p>Since the PlotObjects contain <em>all</em> the information that needs to be passed to <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.plot.html#matplotlib.axes.Axes.plot" title="(in Matplotlib v3.5.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Axes.plot</span></code></a> or <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.contour.html#matplotlib.axes.Axes.contour" title="(in Matplotlib v3.5.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Axes.contour</span></code></a>, this means that any dataset-specific options must be passed along to <code class="docutils literal notranslate"><span class="pre">stage()</span></code>.</p>
</section>
<section id="constructing-a-plot">
<h2>Constructing a plot<a class="headerlink" href="#constructing-a-plot" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../../reference/plotting/#penguins.mkplot" title="penguins.mkplot"><code class="xref any py py-func docutils literal notranslate"><span class="pre">mkplot</span></code></a> performs several jobs when it is called:</p>
<ol class="arabic simple">
<li><p>If the <code class="docutils literal notranslate"><span class="pre">ax</span></code> parameter is not provided, then chooses the currently active <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v3.5.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a> to plot spectra on.</p></li>
<li><p>Iterates over that <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v3.5.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a>’s plot holding area and plots all the spectra in them on the given <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v3.5.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a>. For 1D spectra this is done with <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.plot.html#matplotlib.axes.Axes.plot" title="(in Matplotlib v3.5.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Axes.plot</span></code></a>, and for 2D spectra <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.contour.html#matplotlib.axes.Axes.contour" title="(in Matplotlib v3.5.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Axes.contour</span></code></a>. (Options such as <em>hoffset</em> affect every spectrum, which is why it is passed to <a class="reference internal" href="../../reference/plotting/#penguins.mkplot" title="penguins.mkplot"><code class="xref any py py-func docutils literal notranslate"><span class="pre">mkplot()</span></code></a> and not <code class="docutils literal notranslate"><span class="pre">stage()</span></code>.)</p></li>
<li><p>Fixes the plot axes such that they resemble a typical NMR plot (e.g. inverting axes limits, etc.), then sets up the axes labels and title (if appropriate).</p></li>
</ol>
<ol class="arabic simple" start="3">
<li><p>Stores some plot properties, such as colours and the vertical heights of stacked spectra, in an instance of <a class="reference internal" href="../../reference/plotting/#penguins.pgplot.PlotProperties" title="penguins.pgplot.PlotProperties"><code class="xref any py py-class docutils literal notranslate"><span class="pre">PlotProperties</span></code></a>. This object is also tied to the particular <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v3.5.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a>, and can be accessed with <code class="docutils literal notranslate"><span class="pre">ax.prop</span></code>.</p></li>
<li><p>Resets that <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v3.5.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a>’s PHA to a brand-new instance of <a class="reference internal" href="../../reference/plotting/#penguins.pgplot.PlotHoldingArea" title="penguins.pgplot.PlotHoldingArea"><code class="xref any py py-class docutils literal notranslate"><span class="pre">PlotHoldingArea</span></code></a>.</p></li>
</ol>
<p>If you want to do anything with the <a class="reference external" href="https://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.5.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Figure</span></code></a> and <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v3.5.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a> objects, <strong>the best time to do it is after calling</strong> <a class="reference internal" href="../../reference/plotting/#penguins.mkplot" title="penguins.mkplot"><code class="xref any py py-func docutils literal notranslate"><span class="pre">mkplot</span></code></a>. It conveniently returns <code class="docutils literal notranslate"><span class="pre">(fig,</span> <span class="pre">ax)</span></code> for you to carry out any other methods you may want to (if you didn’t already have a handle to the <a class="reference external" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" title="(in Matplotlib v3.5.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a>).</p>
</section>
<section id="displaying-the-plot">
<h2>Displaying the plot<a class="headerlink" href="#displaying-the-plot" title="Permalink to this headline">¶</a></h2>
<p>At this stage all the necessary matplotlib functions have been called, so all we need to do is to show the plot using <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.show.html#matplotlib.pyplot.show" title="(in Matplotlib v3.5.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">plt.show()</span></code></a>.
Penguins does not try to further complicate this step.
The only suggestion we make is to use <a class="reference internal" href="../../reference/plotting/#penguins.show" title="penguins.show"><code class="xref any py py-func docutils literal notranslate"><span class="pre">penguins.show()</span></code></a> instead: it saves you from having to import matplotlib. :)</p>
</section>
<section id="addendum">
<h2>Addendum<a class="headerlink" href="#addendum" title="Permalink to this headline">¶</a></h2>
<p>Depending on your familiarity with matplotlib, you may find that the three-stage model is somewhat similar to, or rather dissimilar from, matplotlib itself.
It is rather different from typical matplotlib usage, where you don’t need to “construct” a plot; you just call <code class="docutils literal notranslate"><span class="pre">plt.plot()</span></code> or something similar, then go straight to the “display” stage.
However, behind the scenes each call to <code class="docutils literal notranslate"><span class="pre">plt.plot()</span></code> actually creates an <a class="reference external" href="https://matplotlib.org/api/artist_api.html#matplotlib.artist.Artist" title="(in Matplotlib v3.5.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Artist</span></code></a> object which is not <em>actually</em> drawn on the figure until you call <code class="docutils literal notranslate"><span class="pre">fig.draw()</span></code> or something similar.
This is automatically done behind-the-scenes by matplotlib, so the “construction” stage is invisible to the ordinary user.</p>
<p>A different parallel can be drawn with the version control software git.
The most basic git workflow involves a three-step process of adding, committing, then pushing.
In a way, penguins’ staging is similar to running <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>, and indeed the word “stage” was stolen from git terminology.</p>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="../" title="Previous document">Explanations</a>
        </li>
        <li>
          <a href="../../reference/" title="Next document">Reference</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../">penguins</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../howto/">How-tos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Explanations</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Penguins’ Plot Paradigm</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/">Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../">Documentation overview</a><ul>
  <li><a href="../">Explanations</a><ul>
      <li>Previous: <a href="../" title="previous chapter">Explanations</a></li>
      <li>Next: <a href="../../reference/" title="next chapter">Reference</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020–2021, Jonathan Yong.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/explanations/paradigm.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>